<div class="connection-setup-container">
  <div class="setup-card">
    <div class="header">
      <h1>Azure App Configuration Setup</h1>
      <p>Connect to your Azure App Configuration service</p>
    </div>

    <div *ngIf="autoConnecting" class="info-message">
      Found connection string in environment. Connecting...
    </div>

    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <div class="form-group">
      <label for="connectionString">Connection String</label>
      <div class="password-input-wrapper">
        <input 
          [type]="showConnectionString ? 'text' : 'password'"
          id="connectionString" 
          [(ngModel)]="connectionString" 
          placeholder="Endpoint=https://...;Id=...;Secret=..."
          class="form-control"
          (keyup.enter)="connect()"
        />
        <button 
          type="button" 
          class="toggle-visibility-btn"
          (click)="toggleShowConnectionString()"
          [title]="showConnectionString ? 'Hide' : 'Show'"
        >
          {{ showConnectionString ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
        </button>
      </div>
      <small class="help-text">
        Get your connection string from Azure Portal â†’ App Configuration â†’ Access Keys<br/>
        <strong>Tip:</strong> You can also set 'AZURE_APP_CONFIG_CONNECTION_STRING' in localStorage to auto-connect.
      </small>
    </div>

    <div class="form-actions">
      <button class="btn btn-primary" (click)="connect()">
        <span class="icon">ğŸ”—</span> Connect
      </button>
    </div>

    <div class="info-section">
      <h3>How to get your connection string:</h3>
      <ol>
        <li>Go to Azure Portal</li>
        <li>Navigate to your App Configuration resource</li>
        <li>Select "Access Keys" from the left menu</li>
        <li>Copy the "Connection string" (either Primary or Secondary)</li>
      </ol>

      <div class="warning-box">
        <strong>âš ï¸ Security Note:</strong> Connection strings are stored only in memory for this session. 
        A session flag is stored in sessionStorage to track connection status, but the actual connection string is never persisted.
      </div>
    </div>
  </div>
</div>
